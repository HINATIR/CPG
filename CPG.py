ip = "192.168.0.14"

import math
import socket
import subprocess
import linecache
def error():
    print('8文字以内にしてください。')
    exit()

type = input('ポーションの形を入力してください\n5D4 飲むタイプ\n6D8 スプラッシュ\n6E4 残留\n6E0 効果付きの矢-->')
if len(type)>8:
    error()

id = input('効果のidを入力してください.\n01 俊敏\n02 鈍化\n03 採掘速度上昇\n04 採掘速度低下\n05 力\n06 回復\n07 即時ダメージ\n08 跳躍\n09 吐き気\n0A 再生\n0B 耐性\n0C 火炎耐性\n0D 水中呼吸\n0E 不可視\n0F 盲目\n10 暗視\n11 空腹\n12 弱体化\n13 毒\n14 ウィザー\n15 体力増加\n16 金ハート増加\n17 満腹\n18 発光\n19 浮遊\n1A 幸運\n1B 不幸\n1C コンジットパワー\n1D 低速落下-->')
if len(id)>8:
    error()

duration = input('効果時間を入力してください.最大値にしたいならmaxと入力-->')
if len(duration)>8:
    error()
lv = input('効果強度を入力してください.最大値にしたいならmaxと入力-->')
if len(lv)>8:
    error()

w = input('コードをコピーなら1と入力。送信なら2と入力。')

while len(str(type)) < 8:
    type = "0" + str(type)

while len(str(id)) < 8:
    id = "0" + str(id)

if duration == 'max':
    duration = '4FFFFFFF'
while len(str(duration)) < 8:
    duration = "0" + str(duration)

if lv == 'max':
    lv = '7F'
while len(str(lv)) < 8:
    lv = "0" + str(lv)

#cafe
cafe = "30000000109DF84C100000005000000010120000"+type+"3000000010A0A7401000000050000000310000000000004830100000000000001000000050000000111200000000001400120000108709580012000C0000000100120020000000000012001841000000310000000000001830100000000000001000000050000000001200001058FA5400120008000000110012000C00000001001200103F80000000120014000000110012001840FFFFE0001200244100004400120034410000500012003C00000008001200404100008001100026000000500043007500730074006F006D0050006F00740069006F006E0045006600660065006300740073000000000000000000FF001200801067DAF000120088410000A00012008C410000A400120090410000A4001200940A000000001200A0410000B0001200B01058FA54001200B800000011001200BC00000001001200C03F800000001200C400000011001200C841000090001200D4410000F4001200E441000100001200EC00000008001200F0410001200110000E000001000041006D006200690065006E0074000000000000000000FF001201201056415C0010012400000000001200D4410000F400120134410001500012013C00000008001200F44100014400120140410001700110001A0000015000530068006F0077005000610072007400690063006C006500730000000000FF001201701056415C0010017400000000001200D4410000F400120184410001A00012018C00000008001201444100019400120190410001C001100010000001A0004400750072006100740069006F006E00000000000000FF001201C01065993C001201C4"+duration+"001200D4410000F4001201D4410001F0001201DC0000000800120194410001E4001201E04100021001100012000001F00041006D0070006C006900660069006500720000000000FF001202101056415C00100214"+lv+"001200D4410000F400120224410002400012022C00000008001201E44100023400120230410002500110000400000240004900640000000000000000000000FF001202501056415C00100254"+id+"D0000000DEADCAFE"

if w == '1':
    subprocess.run("clip", input=cafe, text=True)
    print('クリップボードにコピーしました。')
if w == '2':
    # ソケット通信
    client=socket.socket(socket.AF_INET,socket.SOCK_STREAM)
    client.connect((ip,7331))
    client.send(bytes.fromhex('03'))
    client.send(bytes.fromhex('10014CFC00000000'))
    #cafeコードを送信
    for x in range(math.floor(len(cafe)/8)):
        client.send(bytes.fromhex('03'))
        client.send(bytes.fromhex('0'+format(0x01133000+x*4,'X')+cafe[x*8:x*8+8]))
    client.send(bytes.fromhex('03'))
    client.send(bytes.fromhex('10014CFC00000001'))
    client.close()
    print('wiiuにコードを送りました。')